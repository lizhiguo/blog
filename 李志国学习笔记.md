### kotlin

## drools

### 常用属性

#### global使用

```
package com.baeldung.drools.rules;

import com.qp.demo.Applicant;

global com.qp.demo.SuggestedRole suggestedRole; //全局变量
global com.qp.demo.DemoService demoService; //spring对象

dialect  "mvel"

rule "Suggest Manager Role"
    when
        Applicant(experienceInYears > 10)
        Applicant(currentSalary > 1000000 && currentSalary <= 2500000)
        eval( "Hello World!2" == demoService.getHello() ) //调用方法返回值
    then
        System.out.println("============="+demoService.getHello());
        suggestedRole.setRole("Manager");
end
# 测试
@Autowired
lateinit var demoService: DemoService
@Test
fun test2() {
    val kieSession = kieContainer.newKieSession()
    val applicant = Applicant("Davis", 37, 1600000.0, 11)
    kieSession.insert(applicant)
    var s = SuggestedRole("")
    kieSession.setGlobal("suggestedRole", s)
    kieSession.setGlobal("demoService", demoService) //spring的service单例对象
    kieSession.fireAllRules()
    kieSession.dispose()
    println(JSONUtil.toJsonPrettyStr(s)) //打印全局变量
}
```



